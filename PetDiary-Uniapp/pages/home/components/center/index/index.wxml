<!--pages/social/components/center/index/index.wxml-->
<!-- 推荐、最新、热榜标签 -->
<view class="top-bar">
  <view class="left"></view>
  <scroll-view scroll-x class="tab">
    <view class="list" style="justify-content: center;">
      <view 
      class="item {{active === index ? 'active' : ''}}" 
      bindtap="switchTab" 
      wx:for="{{navBarList}}" 
      wx:key="index" 
      data-index="{{index}}">
        {{item.title}}
      </view>
    </view>
  </scroll-view>
  <view class="right"></view>
</view>

<scroll-view scroll-y refresher-enabled scroll-with-animation enable-back-to-top="{{isActive}}" refresher-triggered="{{refreshState}}"
bindrefresherrefresh="onRefresh" bindrefresherrestore="abortRefresh" bindrefresherabort="abortRefresh" bindscrolltolower="onLoadMore" 
scroll-top="{{pos}}" class="container">
  <view class="list">
    <view class="item" wx:for="{{list}}" wx:key="index">
      <!-- 头部 -->
      <view class="head">
        <image class="avatar" src="{{item.avatar}}" mode="aspectFill" />
        <view class="username" style="white-space: pre-line;" >@{{item.username}}
          <view style="color: rgb(128, 128, 128);">关注 {{item.fanTotal}}</view>
        </view>
        <view class="fl"></view>
        <view class="share"><iconfont type="add" /> {{item.viewTotal}} 关注</view>
      </view>
      <!-- 中部 -->
      <view class="body">
        <view class="intro">{{item.intro}}</view>
        <view class="intro-pic" wx:if="{{item.contentType==0}}" mode="aspectFit">
          <block wx:if="{{item.pic.url.length === 1}}">
            <image class="pic {{item.pic.mode}}" style="width:{{item.pic.width}}px;" src="{{item.pic.url[0]}}" mode="widthFix" />
          </block>
          <block wx:else>
            <image class="pic group" src="{{item.pic.url[0]}}" mode="aspectFill" />
            <image class="pic group" src="{{item.pic.url[1]}}" mode="aspectFill" />
            <image class="pic group" wx:if="{{item.pic.url[2]}}" src="{{item.pic.url[2]}}" mode="aspectFill" />
          </block>
        </view>
        <view class="intro-video" wx:elif="{{item.contentType==1}}">
          <image class="video" wx:if="{{index != videoId}}" bindtap="onVideoPlay" data-index="{{index}}" src="{{item.video.thumb}}"></image>
          <video class="video" wx:else src="{{item.video.url}}" play-btn-position="center" autoplay></video>
        </view>
      </view>
      <!-- 底部 -->
      <view class="foot">
        <view class="view">发布于 {{item.publishTime}}</view>
        <view class="fl"></view>
        <view class="comment">
          <iconfont type="comment" size="16px" /> {{item.commentTotal}}
        </view>
        <view class="like">
          <iconfont type="dianzan" size="16px" /> {{item.likeTotal}}
        </view>
      </view>
    </view>
  </view>
  <view class="load-more">
    <view class="{{loadState}}"></view>
  </view>
</scroll-view>